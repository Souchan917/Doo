    if (currentStage === 16) {
        const pattern = correctPatterns[currentStage];
        if (!pattern || selectedBeats.size !== pattern.length) {
            selectedBeats.clear();
            selectedBeatsLeft.clear();
            selectedBeatsRight.clear();
            return;
        }

        const allBeatsCorrect = pattern.every(beat => selectedBeats.has(beat));
        if (allBeatsCorrect) {
            // クリック回数が100回以下かチェック
            if (clickCounts.getTotal() <= 100) {
                clearedStages.add(currentStage);
                currentStage++;
                updateStageContent();
            } else {
                // クリック回数が100を超えた場合、リセットボタンを表示
                const resetContainer = document.getElementById('resetContainer');
                if (resetContainer) {
                    resetContainer.classList.add('show');
                }
            }
        }
        selectedBeats.clear();
        selectedBeatsLeft.clear();
